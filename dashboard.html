<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    body { font-family: Inter, sans-serif; }
  </style>
</head>

<body class="bg-gray-100 min-h-screen pb-36">


<!-- HEADER -->
<header class="bg-white shadow-sm p-4 flex justify-between items-center sticky top-0 z-10">
  <h1 class="text-lg font-semibold">Inventory Dashboard</h1>

  <nav class="hidden md:flex gap-4 text-sm">
    <a href="dashboard.html" class="font-medium">Dashboard</a>
    <a href="sales.html">Sales</a>
    <a href="add-product.html">Add Product</a>
    <button onclick="logout()" class="text-red-600">Logout</button>
  </nav>
</header>

<!-- MAIN -->
<main class="p-4 max-w-6xl mx-auto space-y-8">

  <!-- ================= KPIs ================= -->
  <section>
    <h2 class="text-sm font-semibold mb-3 text-gray-700">Business Overview</h2>

    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <div class="bg-white p-4 rounded-2xl shadow-sm border">
        <p class="text-xs text-gray-500">Today Sales</p>
        <p id="todaySales" class="text-2xl font-bold">₵0</p>
      </div>

      <div class="bg-white p-4 rounded-2xl shadow-sm border">
        <p class="text-xs text-gray-500">Revenue</p>
        <p id="revenue" class="text-2xl font-bold">₵0</p>
      </div>

      <div class="bg-white p-4 rounded-2xl shadow-sm border">
        <p class="text-xs text-gray-500">Products</p>
        <p id="productCount" class="text-2xl font-bold">0</p>
      </div>

      <div class="bg-white p-4 rounded-2xl shadow-sm border">
        <p class="text-xs text-red-500">Low Stock</p>
        <p id="lowStock" class="text-2xl font-bold text-red-600">0</p>
      </div>
    </div>
  </section>

  <!-- ================= PRODUCTS ================= -->
  <section>
    <div class="flex justify-between items-center mb-3">
      <h2 class="text-sm font-semibold">Products</h2>

      <!-- GRAND TOTAL INVENTORY VALUE -->
      <!-- <p class="text-sm font-bold text-green-600">
        Total: <span id="inventoryValue">₵0</span>
      </p> -->
    </div>

    <div id="productsList"
      class="bg-white rounded-xl shadow divide-y">
      <!-- JS inserts products here -->
    </div>
  </section>

  <!-- ================= RESTOCK ================= -->
  <section>
    <h2 class="text-sm font-semibold mb-3">Restock Product</h2>

    <div class="bg-white p-4 rounded-xl shadow space-y-3">
      <select id="restockProduct"
        class="w-full border p-2 rounded"></select>

      <input id="restockQty"
        type="number"
        min="1"
        placeholder="Quantity"
        class="w-full border p-2 rounded" />

     <button
  id="restockBtn"
  type="button"
  onclick="restock()"
  class="w-full bg-green-600 text-white p-3 rounded font-semibold
         flex items-center justify-center gap-2
         active:scale-95 disabled:opacity-60">
  <span id="restockBtnText">Add Stock</span>
  <svg id="restockSpinner"
       class="w-5 h-5 hidden animate-spin"
       xmlns="http://www.w3.org/2000/svg"
       fill="none" viewBox="0 0 24 24">
    <circle class="opacity-25" cx="12" cy="12" r="10"
            stroke="currentColor" stroke-width="4"></circle>
    <path class="opacity-75" fill="currentColor"
          d="M4 12a8 8 0 018-8v4l3-3-3-3v4a12 12 0 00-12 12h4z"/>
  </svg>
</button>

    </div>
  </section>

  <section>
  <div class="flex justify-between items-center mb-3">
    <h2 class="text-sm font-semibold">Stock History</h2>

    <input
      type="date"
      id="stockFilterDate"
      class="border rounded p-1 text-xs"
    />
  </div>

  <div id="stockHistory"
       class="bg-white rounded-xl shadow divide-y">
  </div>

  <button
    id="toggleStockHistory"
    onclick="toggleStockHistory()"
    class="text-xs text-blue-600 mt-2 hidden">
    Show more
  </button>
</section>


  <!-- ================= SALES HISTORY ================= -->
  <section>
    <h2 class="text-sm font-semibold mb-3">Sales History</h2>

    <div id="salesList"
      class="bg-white rounded-xl shadow divide-y">
      <!-- JS inserts sales here -->
    </div>
  </section>

</main>

<!-- MOBILE NAV -->
<nav class="fixed bottom-0 left-0 right-0 bg-white border-t md:hidden">
  <div class="flex justify-around text-xs py-2">
    <a href="dashboard.html" class="flex flex-col items-center font-semibold">
      <i data-lucide="home"></i>Dashboard
    </a>
    <a href="sales.html" class="flex flex-col items-center">
      <i data-lucide="shopping-cart"></i>Sales
    </a>
    <a href="add-product.html" class="flex flex-col items-center">
      <i data-lucide="plus-circle"></i>Add
    </a>
    <button onclick="logout()" class="flex flex-col items-center text-red-600">
      <i data-lucide="log-out"></i>Logout
    </button>
  </div>
</nav>

<!-- SCRIPTS -->
<script type="module" src="js/dashboard.js"></script>
<script type="module" src="js/auth.js"></script>

<script>
  lucide.createIcons();
</script>

</body>
</html>
